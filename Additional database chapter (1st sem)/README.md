# ITMO_DA_labs

Дополнительные главы баз данных (1ый семестр)

## Задание 0

файл main_task.sql

### Билеты в кино

Требуется написать скрипт создания, минимального заполнения базы и типовые запросы. Заполнение должно быть достаточным для содержательного выполнения типовых запросов (см. ниже). Скрипт должен быть написан для СУБД PostgreSQL.

База:

База даных позволяет клиентам получать информацию о кинотеатрах (название, адрес, телефон), залах в кинотеатрах, о показываемых в них фильмах (название, жанр, рейтинг, продолжительность), о расписании сеансов.

Типовые запросы:

·         Какие фильмы идут в кинотеатре Аврора 15 сентября 2023 года?
·         Названия кинотеатров и залов, в которых 15 сентября 2023 года шел фильм Переводчик.
·         Top10 фильмов, которые показывали чаше других в сентябре 2023 года.
·         В каких кинотеатрах города не показывали фильм Переводчик?

## Задание 1

папка task_1

Придумать 3 случая использования правила целостности CHECK с регулярными выражениями.
Продемонстрировать 6 примеров (по 2 на каждое правило) положительного и отрицательного прохода через правило целостности с регулрным выражением.

## Задание 2

папка task_2

Создать таблицу с исходными данными и написать запрос, который построит целевую функцию и найдет лучшие квартиры для Анны (с учетом того, что у нее есть собака и она умеет задавать регулярные выражения),
а варианты квартир с 0-м количеством провайдеров она не рассматривает (файл с данными квартир - Anna.csv в папке).

## Задание 3

файл main_task.sql

К своей базе данных (которая была в задании 0) добавьте по паре осмысленных объектов каждого типа (представления, секвенции, функции и процедуры). Продемонстрируйте создание и вызов.

## Задание 4

файл main_task.sql

К своей базе данных (которая была в задании 0) добавьте 4 более или менее содержательных триггера. Продемонстрируйте создание и результаты деятельности этих триггеров.

## Задание 5

файл main_task.sql

В свой скрипт создания базы добавьте процедуру/функцию, которая в блоках exceptions процедур и функций будет отлавливать и фиксировать в журнальной таблице ошибки, возникающие во время их работы.
В журнале фиксируйте: имя  процедуры/функции в которой случилась ошибка; время, тип ошибки, логин пользователя базы, вызвавшего  появление ошибки.

## Задание 6

файл main_task.sql

Напишите запросы, которые через системные представления найдут объекты базы, которые вы создавали (какие сможете).
Выведите статистику по значениям индексных столбцов.
Поймайте код выполняемого запроса.
